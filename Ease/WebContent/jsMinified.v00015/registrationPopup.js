var signUpPopup=function(s){var o=this;this.handler=$(s).closest(".popupHandler"),this.qRoot=$(s),this.name,this.email,this.openDigitsConfirmation=function(){o.qRoot.find("#3").addClass("show"),o.qRoot.find("#1").removeClass("show"),o.qRoot.find("#2").removeClass("show"),$("#3 #digits-email",o.qRoot).click(function(s){s.preventDefault(),ajaxHandler.post($("#1 form",o.qRoot).attr("action"),{email:o.email})}),o.handler.addClass("myshow"),$("body").css("overflow","hidden")},this.openRegistration=function(){o.qRoot.find("#2").addClass("show"),o.qRoot.find("#3").removeClass("show"),o.qRoot.find("#1").removeClass("show"),o.handler.addClass("myshow"),$("body").css("overflow","hidden")},this.open=function(){o.handler.addClass("myshow"),$("body").css("overflow","hidden")},this.close=function(){o.handler.removeClass("myshow"),$("body").css("overflow","")},this.reset=function(){o.qRoot.find("#1").addClass("show"),o.qRoot.find("#2").removeClass("show"),o.qRoot.find("#3").removeClass("show"),o.qRoot.find(".alert-message").removeClass("show"),o.qRoot.find("button").removeClass("not-show")},$(document).click(function(s){$(s.target).hasClass("popupHandler")&&(o.close(),o.reset(),setTimeout(function(){$(s.target).css("display","")},100))}),this.qRoot.find("#1 form").submit(function(s){s.preventDefault(),easeTracker.trackEvent("HomepageSignUp1"),o.email=$(this).find("input[name='email']").val(),o.name=$(this).find("input[name='name']").val();var a=$(this).find(".loading"),e=$(this).find(".submitButton"),t=$(this).find(".alert-message");o.email.length&&o.name.length&&(a.addClass("show"),e.addClass("not-show"),ajaxHandler.post($(this).attr("action"),{email:o.email},function(){a.removeClass("show")},function(){o.openDigitsConfirmation()},function(s){t.text(s),t.css("color","#ec555b"),t.addClass("show"),setTimeout(function(){t.removeClass("show"),e.removeClass("not-show")},3e3)}))}),this.qRoot.find("#3 form").submit(function(s){s.preventDefault(),o.digits=$(this).find("input[name='digits']").val();var a=$(this).find(".loading"),e=$(this).find(".submitButton"),t=$(this).find(".alert-message");o.digits.length&&o.email.length&&(a.addClass("show"),e.addClass("not-show"),ajaxHandler.post($(this).attr("action"),{email:o.email,digits:o.digits},function(){a.removeClass("show")},function(){o.openRegistration()},function(s){a.removeClass("show"),t.text(s),t.css("color","#ec555b"),t.addClass("show"),setTimeout(function(){t.removeClass("show"),e.removeClass("not-show")},3e3)}))}),this.qRoot.find("#2 form").submit(function(s){s.preventDefault();var a=$(this).find("input[name='password']").val(),e=$(this).find("input[name='confirmPassword']").val(),t=$(this).find(".loading"),i=$(this).find(".submitButton"),n=$(this).find(".alert-message");0!=(!o.name.length||!o.email.length||a!==e||o.digits.length)&&(t.addClass("show"),i.addClass("not-show"),ajaxHandler.post($(this).attr("action"),{email:o.email,username:o.name,password:a,digits:o.digits,registration_date:(new Date).getTime(),newsletter:!1},function(){t.removeClass("show")},function(){n.text("Successfully registered"),n.css("color","#24d666"),n.addClass("show"),easeTracker.setUserId(o.email),easeTracker.trackEvent("HomepageSignUp2"),easeTracker.trackEvent("Connect"),setTimeout(function(){window.location="/"},750)},function(s){n.text(s),n.css("color","#ec555b"),n.addClass("show"),setTimeout(function(){n.removeClass("show"),i.removeClass("not-show")},3e3)}))});var a=/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=\S+$).{8,}$/;$("input[name='password']").keyup(function(s){var o=$("input[name='password']").val();$("#validatorPassword").css("display","inline-block"),a.test(o)?$("#validatorPassword").addClass("valid"):$("#validatorPassword").removeClass("valid"),a.test(o)&&$("input[name='confirmPassword']").val()==o?$("#validatorConfirmPass").addClass("valid"):$("#validatorConfirmPass").removeClass("valid")}),$("input[name='confirmPassword']").keyup(function(s){$("#validatorConfirmPass").css("display","inline-block"),a.test($("input[name='password']").val())&&$("input[name='confirmPassword']").val()==$("input[name='password']").val()?$("#validatorConfirmPass").addClass("valid"):$("#validatorConfirmPass").removeClass("valid")}),$("#2 input[name='password']").complexify({strengthScaleFactor:.7},function(s,o){$(".progress .progress-bar").css("width",o+"%"),o<20?$(".progress .progress-bar").css("background-color","#e4543b"):o<40?$(".progress .progress-bar").css("background-color","#e07333"):o<60?$(".progress .progress-bar").css("background-color","#ead94a"):o<80?$(".progress .progress-bar").css("background-color","#ddf159"):$(".progress .progress-bar").css("background-color","#b0df33")})},easeSignUpPopup=null;$(document).ready(function(){easeSignUpPopup=new signUpPopup($("#signUpPopup"))});