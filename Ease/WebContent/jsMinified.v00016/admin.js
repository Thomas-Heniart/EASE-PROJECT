function openSideViewTab(e){$(".RightSideViewTab.show").removeClass("show");var t=$(e.target).closest("button").attr("target");$("#"+t).addClass("show")}function closeSideViewTab(){$(".RightSideViewTab.show").removeClass("show")}function returnClick(){$(".addUsersProgress").addClass("hidden"),$(".addUsers").removeClass("hidden"),$("#progressStatus .progress p").remove()}function integrateUsers(){$(".addUsers").addClass("hidden"),$("#progressStatus .progress").append("<p>Sending to database ... </p>"),$(".addUsersProgress").removeClass("hidden"),$("#progressStatus .progress").append("<p id='sent'>"+n+"/"+o+" emails sent. </p>");var e=$(this).closest("#addUsersForm"),t=$(e).find("#integrateUsers").val().replace(/ /g,"").split(";"),o=t.length,n=0;for(var s in t){var i=t[s].split(":");sendInvitation(i[0],i[1],function(){n++,$("#sent").text(n+"/"+o+" emails sent.")})}}function sendInvitation(e,t,o){postHandler.post("createInvitation",{email:e,groupId:t},function(){},function(t){$("#progressStatus .progress").append("<p>"+e+" -> success : "+t),o()},function(t){$("#progressStatus .progress").append("<p>"+e+" -> error : "+t),o()},"text")}function cleanSavedSessions(){postHandler.post("aspirateur",{},function(){},function(e){console.log(e)},function(e){console.log(e)},"text")}function testWebsites(){postHandler.post("testWebsites",{},function(){},function(e){var t={};t.detail=JSON.parse(e),event=new CustomEvent("MultipleTests",t),document.dispatchEvent(event)},function(e){console.log(e)},"text")}function addWebsiteInfo(){$("#AddSiteTab #addSiteForm #websiteInformations").append("<div class='websiteInfo'><input name='infoName' type='text' class='form-control' placeholder='Info name'/><input name='infoType' type='text' class='form-control' placeholder='Info type'/><input name='infoPlaceholder' type='text' class='form-control' placeholder='Placeholder'/><input name='infoPlaceholderIcon' type='text' class='form-control' placeholder='FA icon'/></div>")}currentAdminPopup=null,$(document).ready(function(){$("#easePopupsHandler").click(function(e){"easePopupsHandler"==$(e.target).attr("id")&&currentAdminPopup.close()}),$(".admin-menu button").click(openSideViewTab),$(".RightSideViewTab button .fa.fa-times").click(closeSideViewTab),$("#return").click(returnClick),$("#integrate").click(integrateUsers),$("#sendAllMails").click(function(){sendEmailsWebsiteIntegrated()}),$("#cleanSavedSessions").click(cleanSavedSessions),$("#buttonTestWebsites").click(testWebsites),$("#AddSiteTab #addSiteForm #addInfo").click(addWebsiteInfo),$(".goTop").click(function(){changePositionForm.setPostName("goTop"),changePositionForm.setSiteToMove($(this).parent())}),$(".goDown").click(function(){changePositionForm.setPostName("goDown"),changePositionForm.setSiteToMove($(this).parent())}),$(".top").click(function(){changePositionForm.setPostName("top"),changePositionForm.setSiteToMove($(this).parent())}),$(".down").click(function(){changePositionForm.setPostName("down"),changePositionForm.setSiteToMove($(this).parent())})});input.search").val("")}}).modal("show")}function openWebsiteMerging(e,a){var i=$("#website-merging");$(".form button",i).click(function(){ajaxHandler.post("/api/v1/admin/MergeWebsite",{id:$("input[name='website_id']",i).val(),id_to_merge:e.id},function(){},function(){$(".item[data-value='"+e.id+"']").remove(),a.remove(),i.modal("hide")})}),i.modal({onHide:function(){$(".form button",i).off("click")}}).modal("show")}function addResult(e){return $("<div class='item' data-value='"+e.id+"'><img class='ui avatar image' src='"+e.logo+"' />"+e.name+"</div>")}function openTeamSettings(e,a){var i=$("#team-settings"),t=$("#send-money",i);$("#current-credit",i).text(e.credit),$("#card-number span",i).text(e.card_number),$("#link-number span",i).text(e.link_number),$("#single-number span",i).text(e.single_number),$("#enterprise-number span",i).text(e.enterprise_number),$("#card-with-password-reminder span",i).text(e.card_with_password_reminder),$("i",t).click(function(a){if(!t.hasClass("loading")){var n=$("input",t).val();if(-1===n.indexOf("."))n=100*parseInt(n);else{var d=n.split(".")[0],s=n.split(".")[1];1===s.length&&(s+="0"),n=100*parseInt(d)+parseInt(s)}t.addClass("loading"),t.addClass("disabled"),ajaxHandler.post("/api/v1/admin/SendLoveMoney",{team_id:e.id,credit:n},function(){},function(e){$("#current-credit",i).text(e.credit),$("input",t).val(""),t.removeClass("loading"),t.removeClass("disabled")})}}),i.modal({onHide:function(){$("i",t).off("click"),$("input",t).val("")}}).modal("show")}$(document).ready(function(){$(".ui.checkbox").checkbox(),$(".ui.dropdown").dropdown(),$(".ui.menu a.item").on("click",function(){$(this).addClass("active").siblings().removeClass("active");var e=$($(this).attr("data-target"));if($(".segment").hide(),e.show(),e.hasClass("loading"))switch(e.attr("id")){case"team-segment":ajaxHandler.get("/api/v1/admin/GetTeamsInformation",null,function(){},function(a){a.forEach(function(e){addTeamRow(e).appendTo($("#team-manager-body"))}),e.removeClass("loading")});break;case"website-segment":ajaxHandler.get("/api/v1/admin/GetTeams",null,function(){},function(e){e.forEach(function(e){$("<div class='item' data-value='"+e.id+"'>"+e.name+"</div>").appendTo($("#website-edition .teams .menu"))})}),ajaxHandler.get("/api/v1/admin/GetSso",null,function(){},function(e){e.forEach(function(e){$("<div class='item' data-value='"+e.id+"'>"+e.name+"</div>").appendTo($("#website-edition .sso .menu"))})}),ajaxHandler.get("/api/v1/admin/GetWebsites",null,function(){},function(a){websites=a,websites.forEach(function(e){addWebsiteRow(e).appendTo($("#website-manager-body")),addResult(e).appendTo($("#website-merging .menu"))}),e.removeClass("loading")})}})});