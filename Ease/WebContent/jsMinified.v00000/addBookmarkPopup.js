addBookmarkPopup=function(o){var t=this;this.qRoot=$(o),this.parentHandler=this.qRoot.closest("#easePopupsHandler"),this.appNameInputHandler=this.qRoot.find("input#appName"),this.urlInputHandler=this.qRoot.find("input[name='url']"),this.appLogoHandler=this.qRoot.find("#appLogo img"),this.errorRowHandler=this.qRoot.find(".errorHandler"),this.infoRow=this.qRoot.find(".infoRow"),this.submitButton=this.qRoot.find("button[type='submit']"),this.goBackButtonHandler=this.qRoot.find("#goBack"),this.currentApp=null,this.currentProfile=null,this.goBackButtonHandler.click(function(){t.close()}),this.qRoot.find("input").keyup(function(o){13==o.which&&t.submitButton.click()}),this.submitButton.click(function(){var o=t.urlInputHandler.val(),n=t.currentApp.id,r=t.currentProfile.id,e=t.appNameInputHandler.val();t.submitButton.addClass("loading"),t.errorRowHandler.removeClass("show"),postHandler.post("AddBookMark",{link:o,websiteId:n,profileId:r,name:e},function(){t.submitButton.removeClass("loading")},function(n){var r=new MyApp;r.init("","",t.currentApp.id,e,n,t.currentApp.ssoId,!0,t.currentApp.imgSrc,o),t.currentProfile.addApp(r),r.scaleAnimate(),t.close()},function(o){t.errorRowHandler.find("p").text(o),t.errorRowHandler.addClass("show")})}),this.reset=function(){t.infoRow.addClass("hide"),t.appNameInputHandler.val(""),t.urlInputHandler.val(""),t.errorRowHandler.removeClass("show"),this.currentApp=null,this.currentProfile=null},this.open=function(o,n,r){currentEasePopup=t,t.reset(),t.currentApp=o,t.currentProfile=n,t.appLogoHandler.attr("src",o.imgSrc),t.appNameInputHandler.val(r?r:o.name),t.urlInputHandler.val(o.url),t.parentHandler.addClass("myshow"),t.qRoot.addClass("show")},this.close=function(){t.parentHandler.removeClass("myshow"),t.qRoot.removeClass("show")}};var easeAddBookmarkPopup;$(document).ready(function(){easeAddBookmarkPopup=new addBookmarkPopup($("#addBookmarkPopup"))});