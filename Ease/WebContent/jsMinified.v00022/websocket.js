var webSocketClient=new function(){var o=this;this.webSocketServerConnectionUrl=document.location.toString().indexOf("localhost")>-1?"localhost:8443":"ease.space",this.socket=null,this.keepAlive=function(){(void 0===o.socket.readyState||o.socket.readyState>1)&&(console.log("webSocket connection lost, trying to reconnect..."),o.socket=new WebSocket("wss://"+window.location.host+"/webSocketServer"),o.socket.onopen=o.onOpen,o.socket.onmessage=o.onMessage,o.socket.onerror=o.onError,o.socket.onclose=o.onClose)},this.initialize=function(){console.log("connection to webSocket server."),o.socket=new WebSocket("wss://"+window.location.host+"/webSocketServer"),o.socket.onopen=o.onOpen,o.socket.onmessage=o.onMessage,o.socket.onerror=o.onError,o.socket.onclose=o.onClose,setInterval(o.keepAlive,3e4)},this.onOpen=function(o){console.log("connection to webSocket server initialized.")},this.onError=function(o){console.log("webSocketClient encountered an error."),console.log("connection to webSocket server closed.")},this.onClose=function(o){console.log("connection to webSocket server closed.")},this.onMessage=function(o){var e=JSON.parse(o.data);console.log(e.type),console.log(e.data)}};window.addEventListener("load",webSocketClient.initialize);