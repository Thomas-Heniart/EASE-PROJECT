var popups=[],closeAllPopups=function(){popups.map(function(t){t.close()})},constructorPopup=function(t){var o=this;this.qRoot=t,this.oForm,this.qCloseButton,this.qCloseButtons,o.qCloseButtons=[],this.qRoot.find("form").each(function(t,s){var e=$(s).attr("oClass");null!=e&&(o.oForm=new Form[e]($(s),o))}),this.qRoot.find("button").each(function(t,s){if("CloseButton"==$(s).attr("oClass")){var e=$(s,o);o.qCloseButtons.push(e)}}),o.qCloseButtons.forEach(function(t){t.click(function(){o.close()})}),popups.push(o),this.open=function(){o.oForm.reset(),o.setVal(arguments),o.qRoot.addClass("md-show"),setTimeout(o.postOpen,100)},this.close=function(){o.oForm.reset(),o.qRoot.removeClass("md-show")},this.postOpen=function(){},this.setVal=function(){}},Popup={DeleteProfilePopup:function(){constructorPopup.apply(this,arguments);var t=this;t.targetProfile,this.setVal=function(o){t.oForm.oInputs[0].val(o[0].id),t.targetProfile=o[0]}},AddAppPopup:function(){constructorPopup.apply(this,arguments);var t=this;this.setVal=function(o){t.oForm.oInputs[0].val(o)},this.postOpen=function(){t.oForm.oInputs[1].qInput.focus()},this.close=function(){t.qRoot.removeClass("md-show"),$(".classicLogin").addClass("show"),$(".suggested-emails").removeClass("show")},this.setHelper=function(o){t.oForm.setHelper(o)},this.setAppsContainer=function(o){t.oForm.setAppsContainer(o)},this.setNewAppItem=function(o){t.oForm.setNewAppItem(o)},this.appId=function(o){t.oForm.app_id=o,null==o&&t.oForm.setPostName("AddClassicApp")},this.setPostName=function(o){t.oForm.setPostName(o)}},ModifyAppPopup:function(){constructorPopup.apply(this,arguments);var t=this;this.close=function(){t.qRoot.removeClass("md-show"),setTimeout(function(){console.log("ok"),$(".classicLogin").addClass("show"),$(".suggested-emails").removeClass("show")},500)},this.setApp=function(o){t.oForm.setApp(o)}},DeleteAppPopup:function(){constructorPopup.apply(this,arguments);var t=this;this.app,this.setVal=function(o){t.oForm.oInputs[0].val(o[0].attr("id")),t.app=o[0]}},DeleteEmailPopup:function(){constructorPopup.apply(this,arguments);var t=this;this.setEmail=function(o){t.oForm.oInputs[0].val(o),t.oForm.qRoot.trigger("StateChanged")}},PopupDeleteAccount:function(){constructorPopup.apply(this,arguments);var t=this;this.setForm=function(o){var s=o.attr("oClass");null!=s&&(t.oForm=new Form[s]($(elem),t))},t.qRoot.find("button[type='submit']").click(function(o){o.preventDefault(),t.close(),t.oForm.submit(o)})},AddUpdatePopup:function(){constructorPopup.apply(this,arguments);var t=this;this.title=t.qRoot.find(".title"),this.text=t.qRoot.find(".text"),this.error=t.qRoot.find(".error"),this.setVal=function(o){t.oForm.oInputs[4].val($(o[1]).attr("siteName")),t.qRoot.find("img").attr("src",$(o[1]).find("img").attr("src")),postHandler.post("checkVerifiedEmail",{email:$(o[1]).attr("login")},function(){},function(s){t.oForm.oInputs[0].val($(o[1]).attr("siteId")),t.updateIndex=$(o[1]).attr("index"),console.log(t.updateIndex),t.oForm.oInputs[1].val(o[0].id),t.oForm.oInputs[2].val($(o[1]).attr("cryptedPassword")),t.oForm.oInputs[3].val($(o[1]).attr("login"));var e=s.split(" ")[0];"1"==e?(t.title.html($(o[1]).attr("login")+"<br>has not been confirmed."),t.text.html("An email was sent to your inbox.<br>Updates will work for this email after confirmation.")):"2"==e?(t.title.html($(o[1]).attr("login")+"<br>has been confirmed."),t.text.html("Click OK to add this website.")):t.text.html("An error has occured, please retry in a few minutes.")},function(o){t.text.html("An error has occured, please retry in a few minutes.")})},this.close=function(){t.oForm.reset(),t.title.html("Verifiying email..."),t.text.html(""),t.error.html(""),t.qRoot.removeClass("md-show")}},RegisterPopup:function(){constructorPopup.apply(this,arguments);var t=this;this.open=function(){t.oForm.reset(),t.setVal(arguments),t.qRoot.addClass("md-show"),$(".md-overlay",t.qRoot.parrent).addClass("md-show")},this.close=function(){this.close=function(){t.oForm.reset(),t.qRoot.removeClass("md-show"),$(".md-overlay",t.qRoot.parrent).removeClass("md-show")}}}};