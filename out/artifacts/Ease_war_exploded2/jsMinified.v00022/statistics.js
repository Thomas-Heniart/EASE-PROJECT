function resetCharts(){$("iframe.chartjs-hidden-iframe").remove()}function pushObjInDatasets(s,e){e.push({label:s.label,data:s.values,backgroundColor:s.backgroundColor,borderColor:s.borderColor})}function createNewChart(s,e,a){return new Chart(s,{type:a,responsive:!0,maintainAspectRatio:!1,data:e})}var usersChart=null,connectionsChart=null,dailyUsersChart=null,appsChart=null;$(document).ready(function(){$("#responses a").click(function(){return $("#responses .show").removeClass("show"),$(".loading-stats").hide(),$("#statisticsForm").show(),$("#responses a").hide(),!1})}),$(document).ready(function(){$("#getStats").click(function(){var s=$("#startDate").val(),e=$("#endDate").val(),a=$("#dailyConnections:checked").val(),t=$("#registeredUsers:checked").val(),r=$("#registeredUsersWithTuto:checked").val(),n=$("#websitesConnections:checked").val(),o=$("#appsAdded:checked").val(),d=$("#appsRemoved:checked").val(),l=($("#medianAppsAdded:checked").val(),$("#dailyUsers:checked").val());$("#statisticsForm").hide(),$(".loading-stats").show(),$("#responses a").show(),resetCharts(),$.post("Statistics",{startDate:s,endDate:e,dailyConnections:a,registeredUsers:t,registeredUsersWithTuto:r,websitesConnections:n,appsAdded:o,appsRemoved:d,dailyUsers:l},function(s){var e,a=JSON.parse(s.substring(4)),t=$("#usersCanvas"),r=$("#connectionsCanvas"),n=$("#appsCanvas"),o=$("#dailyUsersCanvas"),d=null,l=[],c=[],i=[],h=null;for(e in a){var u=a[e];if("dates"!=e&&"dailyUsers"!=e)switch(u.chart){case"usersChart":pushObjInDatasets(u,l);break;case"connectionsChart":pushObjInDatasets(u,c);break;case"appsChart":pushObjInDatasets(u,i)}else"dates"==e?d=u:h=u}var C={labels:d,datasets:l},p={labels:d,datasets:c},v={labels:d,datasets:i};C.datasets.length>0&&(usersChart=createNewChart(t,C,"line"),$("#usersGraph").addClass("show")),p.datasets.length>0&&(connectionsChart=createNewChart(r,p,"line"),$("#connectionsGraph").addClass("show")),v.datasets.length>0&&(appsChart=createNewChart(n,v,"line"),$("#appsGraph").addClass("show")),null!=h&&(dailyUsersChart=createNewChart(o,{labels:h.labels,datasets:[{data:h.values,backgroundColor:h.colors,hoverBackgroundColor:h.colors}]},"doughnut"),$("#general-stats").addClass("show")),$(".loading-stats").hide()},"text")})});