var easeApps=[],easeAppsManager,appsManager=function(){this.getAppsBySsoId=function(t){for(var e=[],o=0;o<easeApps.length;o++)easeApps[o].ssoId!=t||easeApps[o].isEmpty||e.push(easeApps[o]);return e},this.getAppsByLogin=function(t){for(var e=[],o=0;o<easeApps.length;o++)easeApps[o].login==t&&e.push(easeApps[o]);return e},this.getAppsByWebsiteId=function(t){for(var e=[],o=0;o<easeApps.length;o++)easeApps[o].websiteId==t&&e.push(easeApps[o]);return e},this.getAppsByWebsiteIdNotEmpty=function(t){for(var e=[],o=0;o<easeApps.length;o++)easeApps[o].websiteId!=t||easeApps[o].isEmpty||e.push(easeApps[o]);return e},this.getAppById=function(t){for(var e=0;e<easeApps.length;e++)if(easeApps[e].id==t)return easeApps[e];return null},this.getAppByLoginAndSsoId=function(t,e){for(var o=0;o<easeApps.length;o++)if(easeApps[o].ssoId==e&&easeApps[o].getAccountInformationValue("login")==t)return easeApps[o];return null},this.getAppsByLoginAndSsoId=function(t,e){for(var o=[],n=0;n<easeApps.length;n++)easeApps[n].ssoId==e&&easeApps[n].getAccountInformationValue("login")==t&&o.push(easeApps[n]);return o},this.removeApp=function(t){easeApps.splice(easeApps.indexOf(t),1)},this.addApp=function(t){easeApps.push(t)}};$(document).ready(function(){easeAppsManager=new appsManager}),AppTypeMap={LinkApp:'<i class="fa fa-star appTypeIndicator"></i>',LogwithApp:{Facebook:'<i class="fa fa-facebook appTypeIndicator"></i>',LinkedIn:'<i class="fa fa-linkedin appTypeIndicator"></i>'}};var MyApp=function(){var t=this;this.qRoot=null,this.logoHandler,this.appNameHandler,this.settingsButton,this.modifyAppButton,this.deleteAppButton,this.imageArea,this.imgSrc="",this.login="",this.id="",this.accountInformations=[],this.ssoId=-1,this.name,this.websiteId,this.logWith="",this.logWithName="",this.url="",this.currentProfile=null,this.isEmpty=!1,this.type=null,this.changeName=function(e){t.appNameHandler.text(e),t.name=e},this.init=function(e,o,n,a,i,p,s,r,u,c){return t.qRoot=$($("#boxHelper").html()),t.qRoot.attr("logwith",e.length?e:"false"),t.qRoot.attr("webid",n),t.qRoot.attr("id",i),t.qRoot.attr("ssoid",p),t.qRoot.attr("move",s),t.qRoot.attr("name",a),t.accountInformations=o,t.id=i,t.type=c,t.ssoId=p,t.name=a,t.websiteId=n,t.logWith=e,e.length&&(t.logWithName=catalog.getAppById(easeAppsManager.getAppById(e).websiteId).name),t.logoHandler=t.qRoot.find("img.logo"),t.logoHandler.attr("src",r),t.imgSrc=r,t.url=u,t.appNameHandler=t.qRoot.find(".siteName p"),t.settingsButton=t.qRoot.find(".showAppActionsButton"),t.imageArea=t.qRoot.find(".linkImage"),t.appNameHandler.text(a),t.setupAppTypeIndicator(),t.imageArea.click(function(){sendEvent(this)}),t.settingsButton.click(function(e){e.preventDefault(),e.stopPropagation(),easeModifyAppPopup.open(t)}),t},this.initAccountInformations=function(){postHandler.post("GetAccountInformations",{appId:t.id},function(){},function(e){t.accountInformations=JSON.parse(e)},function(t){})},this.getAccountInformationValue=function(e){for(var o=0;o<t.accountInformations.length;o++){var n=t.accountInformations[o];if(n.name===e)return n.value}return""},this.setAccountInformationValue=function(e,o){for(var n=0;n<t.accountInformations.length;n++){var a=t.accountInformations[n];if(a.name===e)return void(a.value=o)}},this.initWithQRoot=function(e){t.qRoot=$(e),t.name=t.qRoot.attr("name"),t.id=t.qRoot.attr("id"),t.type=t.qRoot.attr("data-type"),t.websiteId=t.qRoot.attr("webid"),t.ssoId=t.qRoot.attr("ssoid"),t.logWith=t.qRoot.attr("logwith"),t.logWithName=t.qRoot.attr("logwithname"),t.logoHandler=t.qRoot.find("img.logo"),t.imgSrc=t.logoHandler.attr("lazy-src");var o=t.qRoot.attr("account");return o&&(t.accountInformations=JSON.parse(o),t.qRoot.attr("account","")),t.qRoot.attr("url")&&(t.url=t.qRoot.attr("url"),t.qRoot.attr("url","")),t.qRoot.hasClass("emptyApp")&&(t.isEmpty=!0,t.qRoot.find(".emptyAppIndicator").click(function(e){e.preventDefault(),e.stopPropagation(),easeModifyAppPopup.open(t)})),t.appNameHandler=t.qRoot.find(".siteName p"),t.settingsButton=t.qRoot.find(".showAppActionsButton"),t.imageArea=t.qRoot.find(".linkImage"),t.setupAppTypeIndicator(),t.imageArea.click(function(){sendEvent(this)}),t.settingsButton.click(function(e){e.preventDefault(),e.stopPropagation(),easeModifyAppPopup.open(t)}),t},this.remove=function(){t.qRoot.remove()},this.setupAppTypeIndicator=function(){if(t.imageArea.find(".appTypeIndicator").remove(),"LogwithApp"==t.type)return void(AppTypeMap.LogwithApp[t.logWithName]&&t.imageArea.append(AppTypeMap.LogwithApp[t.logWithName]));AppTypeMap[t.type]&&t.imageArea.append(AppTypeMap[t.type])},this.scaleAnimate=function(){t.imageArea.addClass("scaleinAnimation"),t.imageArea.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){t.imageArea.removeClass("scaleinAnimation")})},this.hideWithAnimation=function(){t.qRoot.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){t.qRoot.addClass("hide"),t.qRoot.removeClass("flip-out-ver-left")}),t.qRoot.addClass("flip-out-ver-left")}};